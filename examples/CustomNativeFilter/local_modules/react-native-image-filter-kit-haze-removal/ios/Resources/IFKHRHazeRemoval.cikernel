kernel vec4 hazeRemovalKernel(sampler src, __color color, float distance, float slope) {
  float d = destCoord().y * slope + distance;

  return premultiply((unpremultiply(sample(src, samplerCoord(src))) - d * color) / (1.0 - d));
}
